# Lab 2 – Data Warehouse (Kimball Star)

## Purpose
Централизованное хранилище в схеме `dwh` с измерениями (ветка, клиент, товар, категория, календарь) и фактом продаж по позициям.

## Скрипты
- `lab2-create.sql` — создаёт схему `dwh`, определяет таблицы измерений и факт (хранятся количество, цена и ссылки на исходные Deal/DealProduct; сумма считается на лету), минимальные внешние ключи и индексы.
- `lab2-insert.sql` — очищает существующие данные и вручную заполняет измерения и факты статическим набором записей (без FDW и функций); `source_deal_id` и `source_deal_product_id` задаются в `fact_sale` и доступны через `receipt` по связи.

## Что показать на защите
1. Количество строк в таблицах, подтверждая загрузку: `SELECT COUNT(*) FROM dwh.fact_sale`.
2. Пример запроса с присоединением измерений (продажи по категории/филиалу).
3. Повторный запуск `lab2-insert.sql` — данные пересоздаются без дублей.
